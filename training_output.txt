ğŸ¯ Unified AQI Model Training Pipeline
ğŸ• Pipeline started at: 2025-11-09 23:15:06 PKT
======================================================================

============================================================
ğŸš€ Training RandomForest Model
â° Started at: 2025-11-09 23:15:09 PKT
============================================================
ğŸš€ Starting AQI Random Forest Training Pipeline...
============================================================
ğŸ“ Output directory: randomforest_additional/11_09_2025_2315_pkt

ğŸ“Š Step 1: Fetching data from Hopsworks...
ğŸ”— Connecting to Hopsworks project: anassale
2025-11-09 23:15:09,847 INFO: Initializing external client
2025-11-09 23:15:09,847 INFO: Base URL: https://c.app.hopsworks.ai:443
2025-11-09 23:15:10,684 INFO: Python Engine initialized.
Traceback (most recent call last):
  File "/home/runner/work/aqi-predictor-10-pearls/aqi-predictor-10-pearls/aqi_randomforest_training_pipeline.py", line 863, in main
    splits, df_sorted = create_time_series_splits(df_processed)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/aqi-predictor-10-pearls/aqi-predictor-10-pearls/aqi_randomforest_training_pipeline.py", line 428, in create_time_series_splits
    for train_index, test_index in tscv.split(df_sorted):
  File "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/sklearn/model_selection/_split.py", line 1289, in _split
    raise ValueError(
ValueError: Cannot have number of folds=6 greater than the number of samples=1.

Logged in to project, explore it here https://c.app.hopsworks.ai:443/p/1263764
âœ… Successfully connected to Hopsworks
âœ… Latest version of karachifeatures10: 3
ğŸ“¥ Retrieving features from: karachifeatures10 (v3)
ğŸ“‹ Retrieving all records...
Reading data from Hopsworks, using Hopsworks Feature Query Service.   Finished: Reading data from Hopsworks, using Hopsworks Feature Query Service (0.46s) 
ğŸ”„ Sorting data by datetime for chronological order...
âœ… Successfully retrieved 1 records
ğŸ“Š Shape: (1, 25)

ğŸ”§ Step 2: Preprocessing data...
ğŸ”§ Preprocessing data...
   ğŸ§¹ Handling missing values...
   ğŸ“Š Ensuring engineered features are properly calculated...
   â• Creating lag features for pollutants...
   â• Creating lag features for pm2_5_nowcast...
   â• Creating lag features for pm10_nowcast...
   â• Creating lag features for co_ppm_8hr_avg...
   â• Creating lag features for no2_ppb...
   âœ… After preprocessing: 1 records

ğŸ“Š Step 3: Creating time series splits...
ğŸ“Š Creating time series splits...

âŒ Error in training pipeline: Cannot have number of folds=6 greater than the number of samples=1.

âœ… RandomForest training completed successfully!
   Result: (None, None, None)

============================================================
ğŸš€ Training LightGBM Model
â° Started at: 2025-11-09 23:15:14 PKT
============================================================
ğŸš€ Starting AQI LGBM Training Pipeline
============================================================
ğŸ“ Attempting to load data from RandomForest CSV first...
âŒ No RandomForest CSV files found, trying general CSV files...
ğŸ”— Connecting to Hopsworks project: anassale
2025-11-09 23:15:14,188 INFO: Closing external client and cleaning up certificates.
Connection closed.
2025-11-09 23:15:14,190 INFO: Initializing external client
2025-11-09 23:15:14,190 INFO: Base URL: https://c.app.hopsworks.ai:443
2025-11-09 23:15:14,831 INFO: Python Engine initialized.
Traceback (most recent call last):
  File "/home/runner/work/aqi-predictor-10-pearls/aqi-predictor-10-pearls/aqi_lgbm_training_pipeline.py", line 817, in main
    splits, df_sorted = create_time_series_splits(df_processed)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/aqi-predictor-10-pearls/aqi-predictor-10-pearls/aqi_lgbm_training_pipeline.py", line 365, in create_time_series_splits
    for train_index, test_index in tscv.split(df_sorted):
  File "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/sklearn/model_selection/_split.py", line 1289, in _split
    raise ValueError(
ValueError: Cannot have number of folds=6 greater than the number of samples=1.

Logged in to project, explore it here https://c.app.hopsworks.ai:443/p/1263764
âœ… Successfully connected to Hopsworks
âœ… Latest version of karachifeatures10: 3
ğŸ“¥ Retrieving features from: karachifeatures10 (v3)
ğŸ“‹ Retrieving all records...
Reading data from Hopsworks, using Hopsworks Feature Query Service.   Reading data from Hopsworks, using Hopsworks Feature Query Service..   Finished: Reading data from Hopsworks, using Hopsworks Feature Query Service (0.64s) 
ğŸ”„ Sorting data by datetime for chronological order...
âœ… Successfully retrieved 1 records
ğŸ“Š Shape: (1, 25)
ğŸ”§ Preprocessing data...
   ğŸ§¹ Handling missing values...
   ğŸ“Š Ensuring engineered features are properly calculated...
   â• Creating lag features for pollutants...
   â• Creating lag features for pm2_5_nowcast...
   â• Creating lag features for pm10_nowcast...
   â• Creating lag features for co_ppm_8hr_avg...
   â• Creating lag features for no2_ppb...
   âœ… After preprocessing: 1 records
ğŸ“Š Final dataset shape: (1, 22)
ğŸ¯ Target variable range: 81.0 - 81.0
ğŸ“Š Creating time series splits...
âŒ Pipeline failed: Cannot have number of folds=6 greater than the number of samples=1.

âœ… LightGBM training completed successfully!
   Result: None

============================================================
ğŸš€ Training XGBoost Model
â° Started at: 2025-11-09 23:15:18 PKT
============================================================
ğŸš€ Starting AQI XGBoost Training Pipeline...
============================================================
ğŸ“ Output directory: xgboost_additional/11_09_2025_2315_pkt

ğŸ“Š Step 1: Fetching data from Hopsworks...
ğŸ“ Attempting to load data from RandomForest CSV first...
âŒ No RandomForest CSV files found, trying general CSV files...
ğŸ”— Connecting to Hopsworks project: anassale
2025-11-09 23:15:18,940 INFO: Closing external client and cleaning up certificates.
Connection closed.
2025-11-09 23:15:18,942 INFO: Initializing external client
2025-11-09 23:15:18,942 INFO: Base URL: https://c.app.hopsworks.ai:443
2025-11-09 23:15:19,705 INFO: Python Engine initialized.
Traceback (most recent call last):
  File "/home/runner/work/aqi-predictor-10-pearls/aqi-predictor-10-pearls/aqi_xgboost_training_pipeline.py", line 816, in main
    splits, df_sorted = create_time_series_splits(df_processed)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/aqi-predictor-10-pearls/aqi-predictor-10-pearls/aqi_xgboost_training_pipeline.py", line 364, in create_time_series_splits
    for train_index, test_index in tscv.split(df_sorted):
  File "/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/sklearn/model_selection/_split.py", line 1289, in _split
    raise ValueError(
ValueError: Cannot have number of folds=6 greater than the number of samples=1.

Logged in to project, explore it here https://c.app.hopsworks.ai:443/p/1263764
âœ… Successfully connected to Hopsworks
âœ… Latest version of karachifeatures10: 3
ğŸ“¥ Retrieving features from: karachifeatures10 (v3)
ğŸ“‹ Retrieving all records...
Reading data from Hopsworks, using Hopsworks Feature Query Service.   Finished: Reading data from Hopsworks, using Hopsworks Feature Query Service (0.35s) 
ğŸ”„ Sorting data by datetime for chronological order...
âœ… Successfully retrieved 1 records
ğŸ“Š Shape: (1, 25)

ğŸ”§ Step 2: Preprocessing data...
ğŸ”§ Preprocessing data...
   ğŸ§¹ Handling missing values...
   ğŸ“Š Ensuring engineered features are properly calculated...
   â• Creating lag features for pollutants...
   â• Creating lag features for pm2_5_nowcast...
   â• Creating lag features for pm10_nowcast...
   â• Creating lag features for co_ppm_8hr_avg...
   â• Creating lag features for no2_ppb...
   âœ… After preprocessing: 1 records

ğŸ“Š Step 3: Creating time series splits...
ğŸ“Š Creating time series splits...

âŒ Error in training pipeline: Cannot have number of folds=6 greater than the number of samples=1.

âœ… XGBoost training completed successfully!
   Result: (None, None, None)

======================================================================
ğŸ“Š TRAINING SUMMARY
======================================================================
â° Completed at: 2025-11-09 23:15:22 PKT
âœ… Successful: 3/3 models
   âœ… RandomForest
   âœ… LightGBM
   âœ… XGBoost

ğŸ‰ All models trained successfully!
2025-11-09 23:15:22,990 INFO: Closing external client and cleaning up certificates.
Connection closed.
